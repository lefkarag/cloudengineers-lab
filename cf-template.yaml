AWSTemplateFormatVersion: '2010-09-09'
Description: CloudFormation template to create an S3 bucket with website hosting enabled

Resources:
  S3WebsiteBucket:
    Type: 'AWS::S3::Bucket'
    Properties: 
      BucketName: !Join 
        - '-'
        - - 'website-bucket'
          - !Ref 'AWS::AccountId'
          - !Ref 'AWS::Region'
      WebsiteConfiguration: 
        IndexDocument: index.html
        ErrorDocument: error.html

  # S3WebsiteBucketPolicy:
  #   Type: 'AWS::S3::BucketPolicy'
  #   Properties: 
  #     Bucket: !Ref S3WebsiteBucket
  #     PolicyDocument: 
  #       Statement: 
  #         - Effect: Allow
  #           Principal: '*'
  #           Action: 's3:GetObject'
  #           Resource: !Sub 'arn:aws:s3:::my-website-bucket-\${AWS::AccountId}-\${AWS::Region}/*'
  

Outputs:
  S3BucketName:
    Description: "Name of the S3 bucket hosting the website"
    Value: !Ref S3WebsiteBucket
  S3WebsiteURL:
    Description: "URL of the S3 website"
    Value: !Sub 'http://\${S3WebsiteBucket.DomainName}'